webpackJsonp([2],{103:function(t,i){},104:function(t,i,s){"use strict";s.d(i,"a",function(){return a}),s.d(i,"b",function(){return n});var a=function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{staticClass:"cart"},[t._m(0),t._v(" "),s("div",{staticClass:"cart-content"},[t._l(t.cartList,function(i,a){return s("div",{staticClass:"cart-content-main"},[s("div",{staticClass:"cart-info"},[s("img",{attrs:{src:t.productDictList[i.id].image}}),t._v(" "),s("span",[t._v(t._s(t.productDictList[i.id].name))])]),t._v(" "),s("div",{staticClass:"cart-price"},[t._v("\n\t\t\t\t￥"+t._s(t.productDictList[i.id].cost)+"\n\t\t\t")]),t._v(" "),s("div",{staticClass:"cart-count"},[s("span",{staticClass:"cart-control-minus",on:{click:function(i){t.handleCount(a,-1)}}},[t._v("-")]),t._v("\n\t\t\t\t"+t._s(i.count)+"\n\t\t\t\t"),s("span",{staticClass:"cart-control-add",on:{click:function(i){t.handleCount(a,1)}}},[t._v("+")])]),t._v(" "),s("div",{staticClass:"cart-cost"},[t._v("\n\t\t\t\t￥"+t._s(t.productDictList[i.id].cost*i.count)+"\n\t\t\t")]),t._v(" "),s("div",{staticClass:"cart-delete"},[s("span",{staticClass:"cart-control-delete",on:{click:function(i){t.handleDelete(a)}}},[t._v("删除")])])])}),t._v(" "),t.cartList.length?t._e():s("div",{staticClass:"cart-empty"},[t._v("购物车为空")])],2),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.cartList.length,expression:"cartList.length"}],staticClass:"cart-promotion"},[s("span",[t._v("使用优惠码:")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.promotionCode,expression:"promotionCode"}],attrs:{type:"text"},domProps:{value:t.promotionCode},on:{input:function(i){i.target.composing||(t.promotionCode=i.target.value)}}}),t._v(" "),s("span",{staticClass:"cart-control-promotion",on:{click:t.handleCheckCode}},[t._v("验证")])]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.cartList.length,expression:"cartList.length"}],staticClass:"cart-footer"},[s("div",{staticClass:"cart-footer-desc"},[t._v("\n\t\t\t共计"),s("span",[t._v(t._s(t.countAll))]),t._v("件商品\n\t\t")]),t._v(" "),s("div",{staticClass:"cart-footer-desc"},[t._v("\n\t\t\t应付总额"),s("span",[t._v("￥"+t._s(t.costAll-t.promotion))]),t._v(" "),s("br"),t._v(" "),t.promotion?[t._v("\n\t\t\t\t(优惠"),s("span",[t._v("￥"+t._s(t.promotion))]),t._v(")\n\t\t\t")]:t._e()],2),t._v(" "),s("div",{staticClass:"cart-footer-desc"},[s("div",{staticClass:"cart-control-order",on:{click:t.handleOrder}},[t._v("现在结算")])])])])},n=[function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{staticClass:"cart-header"},[s("div",{staticClass:"cart-header-title"},[t._v("购物清单")]),t._v(" "),s("div",{staticClass:"cart-header-main"},[s("div",{staticClass:"cart-info"},[t._v("商品信息")]),t._v(" "),s("div",{staticClass:"cart-price"},[t._v("单价")]),t._v(" "),s("div",{staticClass:"cart-count"},[t._v("数量")]),t._v(" "),s("div",{staticClass:"cart-cost"},[t._v("小计")]),t._v(" "),s("div",{staticClass:"cart-delete"},[t._v("删除")])])])}];a._withStripped=!0},86:function(t,i,s){"use strict";function a(t){d||s(103)}Object.defineProperty(i,"__esModule",{value:!0});var n=s(90),c=s.n(n);for(var o in n)"default"!==o&&function(t){s.d(i,t,function(){return n[t]})}(o);var e=s(104),r=s(37),d=!1,v=a,l=Object(r.a)(c.a,e.a,e.b,!1,v,"data-v-11f5a8dc",null);l.options.__file="views\\cart.vue",i.default=l.exports},90:function(t,i,s){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=s(38),n=function(t){return t&&t.__esModule?t:{default:t}}(a);i.default={methods:{handleCount:function(t,i){i<0&&1===this.cartList[t].count||this.$store.commit("editCartCount",{id:this.cartList[t].id,count:i})},handleDelete:function(t){this.$store.commit("deleteCart",this.cartList[t].id)},handleCheckCode:function(){if(""===this.promotionCode)return void window.alert("请输入优惠码");"Vue.js"!==this.promotionCode?window.alert("优惠码优惠码验证失败"):this.promotion=500},handleOrder:function(){this.$store.dispatch("buy").then(function(){window.alert("购买成功")})}},computed:{cartList:function(){return this.$store.state.cartList},productDictList:function(){var t={};return this.productList.forEach(function(i){t[i.id]=i}),t},countAll:function(){var t=0;return this.cartList.forEach(function(i){t+=i.count}),t},costAll:function(){var t=this,i=0;return this.cartList.forEach(function(s){i+=t.productDictList[s.id].cost*s.count}),i}},data:function(){return{productList:n.default,promotionCode:"",promotion:0}}}}});